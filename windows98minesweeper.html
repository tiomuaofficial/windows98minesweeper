<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindSweeper</title>

<style>
  body {
    margin: 0;
    font-family: Tahoma, Verdana, sans-serif;
    background: #008080;
    color: black;
  }

  header {
    background: #c0c0c0;
    border-bottom: 2px solid #000;
    border-top: 2px solid #fff;
    padding: 8px;
    font-size: 14px;
  }

  main {
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }

  .window {
    background: #c0c0c0;
    border: 2px solid #000;
    border-top-color: #fff;
    border-left-color: #fff;
    padding: 6px;
  }

  .titlebar {
    background: linear-gradient(to right, #000080, #1084d0);
    color: white;
    padding: 4px 6px;
    font-size: 14px;
    margin-bottom: 6px;
  }

  .controls {
    font-size: 12px;
    margin-bottom: 6px;
  }

  select, button {
    font-family: inherit;
    font-size: 12px;
    background: #c0c0c0;
    border: 2px solid #000;
    border-top-color: #fff;
    border-left-color: #fff;
    padding: 2px 6px;
    margin: 2px;
    cursor: pointer;
  }

  select:active, button:active {
    border-top-color: #000;
    border-left-color: #000;
    border-bottom-color: #fff;
    border-right-color: #fff;
  }

  #game {
    display: grid;
    background: #808080;
    border: 2px solid #000;
    border-top-color: #404040;
    border-left-color: #404040;
    padding: 4px;
  }

  .cell {
    width: 24px;
    height: 24px;
    background: #c0c0c0;
    border: 2px solid #000;
    border-top-color: #fff;
    border-left-color: #fff;
    font-weight: bold;
    font-size: 14px;
    line-height: 20px;
    text-align: center;
    cursor: pointer;
    user-select: none;
  }

  .revealed {
    background: #bdbdbd;
    border: 1px solid #808080;
    cursor: default;
  }

  .bomb {
    background: red;
  }

  .flag {
    color: red;
  }

  .n1 { color: blue; }
  .n2 { color: green; }
  .n3 { color: red; }
  .n4 { color: navy; }
  .n5 { color: maroon; }
  .n6 { color: teal; }
</style>
</head>

<body>

<header>
  MindSweeper.exe
</header>

<main>
  <div class="window">
    <div class="titlebar">MindSweeper</div>

    <div class="controls">
      Size:
      <select id="size">
        <option value="8">Small</option>
        <option value="12">Medium</option>
        <option value="20">Massive</option>
      </select>

      Difficulty:
      <select id="difficulty">
        <option value="0.1">Easy</option>
        <option value="0.15">Medium</option>
        <option value="0.25">Hard</option>
      </select>

      <button onclick="startGame()">Restart</button>
    </div>

    <div class="controls">
      Time: <span id="timer">0</span>
    </div>

    <div id="game"></div>
  </div>
</main>

<script>
let gridSize, bombChance, grid, revealed;
let timer, time = 0;
let totalSafeCells = 0;
let revealedSafeCells = 0;

const game = document.getElementById("game");
const size = document.getElementById("size");
const difficulty = document.getElementById("difficulty");
const timerDisplay = document.getElementById("timer");

function startGame() {
  clearInterval(timer);
  time = 0;
  timerDisplay.textContent = 0;

  gridSize = Number(size.value);
  bombChance = Number(difficulty.value);

  grid = [];
  revealed = [];
  totalSafeCells = 0;
  revealedSafeCells = 0;

  game.innerHTML = "";
  game.style.gridTemplateColumns = `repeat(${gridSize}, 24px)`;

  for (let i = 0; i < gridSize * gridSize; i++) {
    if (Math.random() < bombChance) {
      grid[i] = "B";
    } else {
      grid[i] = 0;
      totalSafeCells++;
    }
    revealed[i] = false;
  }

  for (let i = 0; i < grid.length; i++) {
    if (grid[i] !== "B") grid[i] = countBombs(i);
  }

  for (let i = 0; i < grid.length; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";

    cell.oncontextmenu = e => {
      e.preventDefault();
      if (!revealed[i]) {
        cell.textContent = cell.textContent === "âš‘" ? "" : "âš‘";
        cell.classList.toggle("flag");
      }
    };

    cell.onclick = () => revealCell(i);
    game.appendChild(cell);
  }

  timer = setInterval(() => {
    time++;
    timerDisplay.textContent = time;
  }, 1000);
}

function countBombs(i) {
  let count = 0;
  for (let y = -1; y <= 1; y++) {
    for (let x = -1; x <= 1; x++) {
      const n = i + x + y * gridSize;
      if (
        n >= 0 &&
        n < grid.length &&
        Math.abs((i % gridSize) - (n % gridSize)) <= 1 &&
        grid[n] === "B"
      ) count++;
    }
  }
  return count;
}

function revealCell(i) {
  const cell = game.children[i];
  if (revealed[i] || cell.textContent === "âš‘") return;

  revealed[i] = true;
  cell.classList.add("revealed");

  if (grid[i] === "B") {
    cell.classList.add("bomb");
    cell.textContent = "ðŸ’£";
    clearInterval(timer);
    alert("Game Over");
    return;
  }

  revealedSafeCells++;

  if (grid[i] > 0) {
    cell.textContent = grid[i];
    cell.classList.add("n" + grid[i]);
    checkWin();
    return;
  }

  for (let y = -1; y <= 1; y++) {
    for (let x = -1; x <= 1; x++) {
      const n = i + x + y * gridSize;
      if (
        n >= 0 &&
        n < grid.length &&
        Math.abs((i % gridSize) - (n % gridSize)) <= 1
      ) {
        if (!revealed[n]) revealCell(n);
      }
    }
  }

  checkWin();
}

function checkWin() {
  if (revealedSafeCells === totalSafeCells) {
    clearInterval(timer);
    setTimeout(() => {
      alert(`You win!\nTime: ${time}s`);
    }, 50);
  }
}

startGame();
</script>

</body>
</html>
